<div
  class="flex flex-col gap-4 sm:flex-row sm:gap-0 items-center justify-between"
>
  <h1 class="text-2xl md:text-3xl font-semibold">Les coachs du club</h1>
  <!-- TODO CHANGER LA ROUTE QUAND LA PAGE D'AJOUT D'UN COACH SERA FAITE -->
  <app-button
    [routerLink]="[
      AppRoutes.app.admin.coachesFull,
      AppRoutes.app.admin.addCoach
    ]"
  >
    Ajouter un coach
  </app-button>
</div>

<!-- ARRAY OF COACHES -->
<!-- TODO EN FAIRE UN COMPOSANT -->
<div class="mt-8">
  <div class="card">
    <p-toast />

    <!-- MODAL DELETE CONFIRMATION -->
    <p-confirmdialog #cd>
      <ng-template
        #headless
        let-message
        let-onAccept="onAccept"
        let-onReject="onReject"
      >
        <div class="flex flex-col items-center p-4 sm:p-8 bg-white rounded">
          <!-- WARNING LOGO -->
          <div
            class="rounded-full bg-primary inline-flex justify-center items-center h-24 w-24 -mt-16 sm:-mt-20"
          >
            <div class="p-3 rounded-full bg-error-100">
              <app-custom-icon
                name="ionWarningOutline"
                size="40"
                class="text-error-600! pb-1"
              />
            </div>
          </div>
          <!-- HEADER -->
          <span
            class="font-poppins font-bold text-xl sm:text-2xl block mt-2 sm:mt-3 text-error-600"
          >
            {{ message.header }}
          </span>
          <!-- CONTENT -->
          <div
            class="mb-0 mt-4 text-text flex flex-col gap-y-2 max-w-[315px] sm:max-w-[350px] text-sm sm:text-base"
          >
            <p>
              Voulez vous vraiment supprimer le compte du coach
              <span class="font-bold">{{ message.message }}</span>
              ?
            </p>
            <p>
              Tous les cours associés à ce coach seront supprimés également !
            </p>
          </div>
          <p class="text-center font-bold underline text-error-500 mt-4">
            Cette action est irréversible !
          </p>
          <!-- BUTTONS ROW -->
          <div class="flex items-center gap-4 mt-6">
            <app-button typeButton="ghost" (onClick)="onReject()">
              Annuler
            </app-button>
            <app-button typeButton="cancel" (onClick)="onAccept()">
              Supprimer
            </app-button>
          </div>
        </div>
      </ng-template>
    </p-confirmdialog>

    <!-- COACHES TABLE -->
    <p-table [value]="coaches" [tableStyle]="{ 'min-width': '50rem' }">
      <ng-template #header>
        <tr>
          <th>Prénom</th>
          <th>Nom</th>
          <th>E-mail</th>
          <th>Ajouté le</th>
          <th>Modifié le</th>
          <th style="width: 5rem">Actions</th>
        </tr>
      </ng-template>
      <ng-template #body let-coach>
        <tr>
          <td>{{ coach.firstname }}</td>
          <td>{{ coach.lastname | uppercase }}</td>
          <td>{{ coach.email }}</td>
          <td>{{ coach.createdAt | date : "dd MMMM YYYY" }}</td>
          <td>{{ coach.updatedAt | date : "dd MMMM YYYY à HH:mm:ss" }}</td>
          <td class="flex items-center gap-4">
            <button
              class="group cursor-pointer p-1.5 border border-transparent rounded-lg transition-colors duration-300 ease-in-out hover:bg-information-100 active:border-information-600"
              [routerLink]="[
                AppRoutes.app.admin.coachesFull,
                AppRoutes.app.admin.updateCoach,
                coach.id
              ]"
            >
              <app-custom-icon
                name="ionPencilOutline"
                size="18"
                class="text-information-600"
              />
            </button>
            <button
              class="group cursor-pointer p-1.5 border border-transparent rounded-lg transition-colors duration-300 ease-in-out hover:bg-error-100 active:border-error-600"
              (click)="onConfirmDelete(coach)"
            >
              <app-custom-icon
                name="ionTrashOutline"
                size="18"
                class="text-error-600!"
              />
            </button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
